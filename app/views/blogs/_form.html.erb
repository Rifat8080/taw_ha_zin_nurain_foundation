<%= form_with model: @blog, local: true, html: {multipart: true, class: "max-w-2xl mx-auto bg-white rounded-xl shadow-lg p-8 space-y-6"} do |f| %>
  <div>
    <%= f.label :title, class: "block font-semibold mb-1 text-gray-800" %>
    <%= f.text_field :title, class: "w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-foundationprimarygreen" %>
  </div>

  <div>
    <%= f.label :author, class: "block font-semibold mb-1 text-gray-800" %>
    <%= f.text_field :author, class: "w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-foundationprimarygreen" %>
  </div>

  <div>
    <%= f.label :body, class: "block font-semibold mb-1 text-gray-800" %>
    <%= f.text_area :body, rows: 8, class: "w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-foundationprimarygreen" %>
  </div>

  <div>
    <%= f.label :images, "Upload Images", class: "block font-semibold mb-1 text-gray-800" %>
    <%= f.file_field :images, multiple: true, class: "w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-foundationprimarygreen" %>
  </div>

  <% if @blog.images.attached? %>
    <div class="mt-4">
      <h3 class="font-semibold mb-2 text-gray-700">Existing Images</h3>
      <div class="flex flex-wrap gap-4">
        <% @blog.images.each do |img| %>
          <div class="relative group">
            <%= image_tag img.variant(resize_to_limit: [150, 150]), class: "rounded shadow border border-gray-200" %>
            <label class="absolute top-1 right-1 bg-white/80 rounded px-2 py-1 text-xs font-semibold text-red-600 shadow group-hover:bg-red-100 cursor-pointer">
              <%= check_box_tag "remove_image_ids[]", img.id, false, class: "mr-1 align-middle" %>
              Remove
            </label>
          </div>
        <% end %>
      </div>
    </div>
  <% end %>

  <div class="flex justify-end">
    <%= f.submit class: "px-6 py-2 bg-foundationprimarygreen text-white rounded hover:bg-green-700 font-semibold transition" %>
  </div>
<% end %>
