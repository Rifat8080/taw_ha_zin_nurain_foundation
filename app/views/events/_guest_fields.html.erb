<div class="guest-form-item bg-gray-50 p-4 rounded-lg border border-gray-200">
  <%= form.hidden_field :id if form.object.persisted? %>
  <%= form.hidden_field :_destroy, class: "destroy-field", value: "false" %>
  
  <div class="flex items-center justify-between mb-4">
    <h4 class="text-sm font-medium text-gray-900">
      <%= form.object.persisted? ? "Guest Details" : "New Guest" %>
    </h4>
    <button type="button" 
            class="remove-guest-btn inline-flex items-center px-2 py-1 border border-red-300 text-xs font-medium rounded text-red-700 bg-white hover:bg-red-50 transition-colors duration-200">
      <svg class="w-3 h-3 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
      </svg>
      Remove
    </button>
  </div>
  
  <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
    <div class="form-group">
      <%= form.label :name, "Guest Name *", class: "block text-sm font-medium text-gray-700" %>
      <%= form.text_field :name, 
          placeholder: "Enter guest name", 
          required: true,
          class: "mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500" %>
      <% if form.object.errors[:name].any? %>
        <p class="text-sm text-red-600 mt-1">
          <svg class="inline w-4 h-4 mr-1" fill="currentColor" viewBox="0 0 20 20">
            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path>
          </svg>
          <%= form.object.errors[:name].first %>
        </p>
      <% end %>
    </div>
    
    <div class="form-group">
      <%= form.label :title, "Title/Position", class: "block text-sm font-medium text-gray-700" %>
      <%= form.text_field :title, 
          placeholder: "e.g., Speaker, Performer, VIP", 
          class: "mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500" %>
    </div>
  </div>
  
  <div class="mt-4 form-group">
    <%= form.label :description, "Description", class: "block text-sm font-medium text-gray-700" %>
    <%= form.text_area :description, 
        rows: 3, 
        placeholder: "Brief description about the guest...", 
        class: "mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500" %>
  </div>
  
  <div class="mt-4 form-group">
    <%= form.label :image, "Guest Image", class: "block text-sm font-medium text-gray-700" %>
    
    <% if form.object.persisted? && form.object.image.attached? %>
      <div class="mb-2">
        <%= image_tag form.object.image, 
            class: "w-20 h-20 object-cover rounded-lg border border-gray-300", 
            alt: "Current guest image" %>
        <p class="text-xs text-gray-500 mt-1">Current image: <%= form.object.image.filename %></p>
      </div>
    <% end %>
    
    <%= form.file_field :image, 
        accept: "image/*", 
        data: { max_size: 5242880 },
        class: "guest-image-input mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100 transition-colors duration-200" %>
    
    <div class="image-error-message hidden mt-1">
      <p class="text-sm text-red-600">
        <svg class="inline w-4 h-4 mr-1" fill="currentColor" viewBox="0 0 20 20">
          <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path>
        </svg>
        <span class="error-text">Image upload error</span>
      </p>
    </div>
    
    <% if form.object.errors[:image].any? %>
      <div class="mt-1">
        <% form.object.errors[:image].each do |error| %>
          <p class="text-sm text-red-600">
            <svg class="inline w-4 h-4 mr-1" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path>
            </svg>
            Image <%= error %>
          </p>
        <% end %>
      </div>
    <% end %>
    
    <p class="text-xs text-gray-500 mt-1">
      <% if form.object.persisted? && form.object.image.attached? %>
        Upload a new image to replace the current one (optional)
      <% else %>
        Upload an image for this guest (optional)
      <% end %>
      <br>
      <span class="text-gray-400">Supported formats: JPEG, PNG, GIF, WebP (max 5MB)</span>
    </p>
  </div>
</div>
